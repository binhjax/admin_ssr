{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport WithDva from '../../utils/store';\n\nconst Restaurant = props => {\n  const dispatch = action => {\n    const {\n      dispatch\n    } = props;\n    dispatch(action);\n  };\n\n  useEffect(() => {\n    //Trigger to load data when component is mounted \n    console.log(\"Restaurant: useEffect \", props); // const { dispatch } = props;\n\n    console.log(\"Dispatch action: restaurant/fetch \");\n    dispatch({\n      type: 'restaurant/fetch',\n      search: {},\n      pagination: {}\n    });\n    return () => {};\n  }, []);\n  const {\n    error\n  } = props;\n\n  if (error) {\n    return __jsx(\"div\", null, \"An error occured: \", error.message);\n  }\n\n  const {\n    restaurant: {\n      data: {\n        list,\n        pagination\n      }\n    }\n  } = props;\n  console.log(\"LIST = \", list, typeof list);\n  let restaurants = Object.values(list);\n  return __jsx(\"ul\", null, restaurants.map(restaurant => __jsx(\"li\", {\n    key: restaurant.id\n  }, restaurant.name)));\n};\n\nRestaurant.getInitialProps = async ctx => {\n  console.log(\"Server init => Pass to client \");\n\n  try {\n    const res = await axios.get('http://localhost:1337/restaurants');\n    const restaurants = res.data;\n    return {\n      restaurants\n    };\n  } catch (error) {\n    return {\n      error\n    };\n  }\n}; // export default Restaurant\n\n\nexport default WithDva(state => {\n  return {\n    restaurant: state.restaurant\n  };\n})(Restaurant);","map":null,"metadata":{},"sourceType":"module"}