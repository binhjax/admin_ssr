{"ast":null,"code":"import _regeneratorRuntime from \"/Volumes/ExternalData/Work/vnshop/admin/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Volumes/ExternalData/Work/vnshop/admin/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport WithDva from '../../utils/store';\n\nvar Restaurant = function Restaurant(props) {\n  var dispatch = function dispatch(action) {\n    var dispatch = props.dispatch;\n    dispatch(action);\n  };\n\n  useEffect(function () {\n    //Trigger to load data when component is mounted\n    console.log('Restaurant: useEffect ', props); // const { dispatch } = props;\n\n    console.log('Dispatch action: restaurant/fetch ');\n    dispatch({\n      type: 'restaurant/fetch',\n      search: {},\n      pagination: {}\n    });\n    return function () {};\n  }, []);\n  var error = props.error;\n\n  if (error) {\n    return __jsx(\"div\", null, \"An error occured: \", error.message);\n  }\n\n  var _props$restaurant$dat = props.restaurant.data,\n      list = _props$restaurant$dat.list,\n      pagination = _props$restaurant$dat.pagination;\n  console.log('LIST = ', list, typeof list);\n  var restaurants = Object.values(list);\n  return __jsx(\"ul\", null, restaurants.map(function (restaurant) {\n    return __jsx(\"li\", {\n      key: restaurant.id\n    }, restaurant.name);\n  }));\n};\n\nRestaurant.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var res, restaurants;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log('Server init => Pass to client ');\n            _context.prev = 1;\n            _context.next = 4;\n            return axios.get('http://localhost:1337/restaurants');\n\n          case 4:\n            res = _context.sent;\n            restaurants = res.data;\n            return _context.abrupt(\"return\", {\n              restaurants: restaurants\n            });\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](1);\n            return _context.abrupt(\"return\", {\n              error: _context.t0\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 9]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}(); // export default Restaurant\n\n\nexport default WithDva(function (state) {\n  return {\n    restaurant: state.restaurant\n  };\n})(Restaurant);","map":null,"metadata":{},"sourceType":"module"}