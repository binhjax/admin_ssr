{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/tuanquang/admin_ssr/src/components/Test/LabelWidget.tsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as React from 'react';\nimport styled from '@emotion/styled';\nlet S;\n\n(function (_S) {\n  const Label = _S.Label = styled.div`\n    display: inline-block;\n    position: absolute;\n  `;\n  const Foreign = _S.Foreign = styled.foreignObject`\n    pointer-events: none;\n    overflow: visible;\n  `;\n})(S || (S = {}));\n\nexport class LabelWidget extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"ref\", void 0);\n\n    _defineProperty(this, \"calculateLabelPosition\", () => {\n      const {\n        path,\n        position\n      } = found;\n      const labelDimensions = {\n        width: this.ref.current.offsetWidth,\n        height: this.ref.current.offsetHeight\n      };\n      const pathCentre = path.getPointAtLength(position);\n      const labelCoordinates = {\n        x: pathCentre.x - labelDimensions.width / 2 + this.props.label.getOptions().offsetX,\n        y: pathCentre.y - labelDimensions.height / 2 + this.props.label.getOptions().offsetY\n      };\n      this.ref.current.style.transform = `translate(${labelCoordinates.x}px, ${labelCoordinates.y}px)`;\n    });\n\n    this.ref = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidUpdate() {\n    window.requestAnimationFrame(this.calculateLabelPosition);\n  }\n\n  componentDidMount() {\n    window.requestAnimationFrame(this.calculateLabelPosition);\n  }\n\n  render() {\n    const canvas = this.props.engine.getCanvas();\n    return /*#__PURE__*/_jsxDEV(S.Foreign, {\n      width: canvas.offsetWidth,\n      height: canvas.offsetHeight,\n      children: /*#__PURE__*/_jsxDEV(S.Label, {\n        ref: this.ref,\n        children: this.props.engine.getFactoryForLabel(this.props.label).generateReactWidget({\n          model: this.props.label\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, this.props.label.getID(), false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/tuanquang/admin_ssr/src/components/Test/LabelWidget.tsx"],"names":["React","styled","Label","div","Foreign","foreignObject","S","LabelWidget","Component","constructor","props","path","position","found","labelDimensions","width","ref","current","offsetWidth","height","offsetHeight","pathCentre","getPointAtLength","labelCoordinates","x","label","getOptions","offsetX","y","offsetY","style","transform","createRef","componentDidUpdate","window","requestAnimationFrame","calculateLabelPosition","componentDidMount","render","canvas","engine","getCanvas","getFactoryForLabel","generateReactWidget","model","getID"],"mappings":";;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAGA,OAAOC,MAAP,MAAmB,iBAAnB;;;;AASS,QAAMC,KAAK,cAAGD,MAAM,CAACE,GAAI;AAClC;AACA;AACA,GAHS;AAKA,QAAMC,OAAO,gBAAGH,MAAM,CAACI,aAAc;AAC9C;AACA;AACA,GAHS;GANCC,C,KAAAA,C;;AAYV,OAAO,MAAMC,WAAN,SAA0BP,KAAK,CAACQ,SAAhC,CAA4D;AAGjEC,EAAAA,WAAW,CAACC,KAAD,EAA0B;AACnC,UAAMA,KAAN;;AADmC;;AAAA,oDAaZ,MAAM;AAC7B,YAAM;AAAEC,QAAAA,IAAF;AAAQC,QAAAA;AAAR,UAAqBC,KAA3B;AAEA,YAAMC,eAAe,GAAG;AACtBC,QAAAA,KAAK,EAAE,KAAKC,GAAL,CAASC,OAAT,CAAiBC,WADF;AAEtBC,QAAAA,MAAM,EAAE,KAAKH,GAAL,CAASC,OAAT,CAAiBG;AAFH,OAAxB;AAKA,YAAMC,UAAU,GAAGV,IAAI,CAACW,gBAAL,CAAsBV,QAAtB,CAAnB;AAEA,YAAMW,gBAAgB,GAAG;AACvBC,QAAAA,CAAC,EAAEH,UAAU,CAACG,CAAX,GAAeV,eAAe,CAACC,KAAhB,GAAwB,CAAvC,GAA2C,KAAKL,KAAL,CAAWe,KAAX,CAAiBC,UAAjB,GAA8BC,OADrD;AAEvBC,QAAAA,CAAC,EAAEP,UAAU,CAACO,CAAX,GAAed,eAAe,CAACK,MAAhB,GAAyB,CAAxC,GAA4C,KAAKT,KAAL,CAAWe,KAAX,CAAiBC,UAAjB,GAA8BG;AAFtD,OAAzB;AAKA,WAAKb,GAAL,CAASC,OAAT,CAAiBa,KAAjB,CAAuBC,SAAvB,GAAoC,aAAYR,gBAAgB,CAACC,CAAE,OAAMD,gBAAgB,CAACK,CAAE,KAA5F;AACD,KA7BoC;;AAEnC,SAAKZ,GAAL,gBAAWhB,KAAK,CAACgC,SAAN,EAAX;AACD;;AAEDC,EAAAA,kBAAkB,GAAG;AACnBC,IAAAA,MAAM,CAACC,qBAAP,CAA6B,KAAKC,sBAAlC;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClBH,IAAAA,MAAM,CAACC,qBAAP,CAA6B,KAAKC,sBAAlC;AACD;;AAoBDE,EAAAA,MAAM,GAAG;AACP,UAAMC,MAAM,GAAG,KAAK7B,KAAL,CAAW8B,MAAX,CAAkBC,SAAlB,EAAf;AACA,wBACE,QAAC,CAAD,CAAG,OAAH;AAEE,MAAA,KAAK,EAAEF,MAAM,CAACrB,WAFhB;AAGE,MAAA,MAAM,EAAEqB,MAAM,CAACnB,YAHjB;AAAA,6BAKE,QAAC,CAAD,CAAG,KAAH;AAAS,QAAA,GAAG,EAAE,KAAKJ,GAAnB;AAAA,kBACG,KAAKN,KAAL,CAAW8B,MAAX,CACEE,kBADF,CACqB,KAAKhC,KAAL,CAAWe,KADhC,EAEEkB,mBAFF,CAEsB;AAAEC,UAAAA,KAAK,EAAE,KAAKlC,KAAL,CAAWe;AAApB,SAFtB;AADH;AAAA;AAAA;AAAA;AAAA;AALF,OACO,KAAKf,KAAL,CAAWe,KAAX,CAAiBoB,KAAjB,EADP;AAAA;AAAA;AAAA;AAAA,YADF;AAaD;;AAjDgE","sourcesContent":["import * as React from 'react';\nimport { DiagramEngine } from '@projectstorm/react-diagrams';\nimport { LabelModel } from './LabelModel';\nimport styled from '@emotion/styled';\n\nexport interface LabelWidgetProps {\n  engine: DiagramEngine;\n  label: LabelModel;\n  index: number;\n}\n\nnamespace S {\n  export const Label = styled.div`\n    display: inline-block;\n    position: absolute;\n  `;\n\n  export const Foreign = styled.foreignObject`\n    pointer-events: none;\n    overflow: visible;\n  `;\n}\n\nexport class LabelWidget extends React.Component<LabelWidgetProps> {\n  ref: React.RefObject<HTMLDivElement>;\n\n  constructor(props: LabelWidgetProps) {\n    super(props);\n    this.ref = React.createRef();\n  }\n\n  componentDidUpdate() {\n    window.requestAnimationFrame(this.calculateLabelPosition);\n  }\n\n  componentDidMount() {\n    window.requestAnimationFrame(this.calculateLabelPosition);\n  }\n\n  calculateLabelPosition = () => {\n    const { path, position } = found;\n\n    const labelDimensions = {\n      width: this.ref.current.offsetWidth,\n      height: this.ref.current.offsetHeight,\n    };\n\n    const pathCentre = path.getPointAtLength(position);\n\n    const labelCoordinates = {\n      x: pathCentre.x - labelDimensions.width / 2 + this.props.label.getOptions().offsetX,\n      y: pathCentre.y - labelDimensions.height / 2 + this.props.label.getOptions().offsetY,\n    };\n\n    this.ref.current.style.transform = `translate(${labelCoordinates.x}px, ${labelCoordinates.y}px)`;\n  };\n\n  render() {\n    const canvas = this.props.engine.getCanvas();\n    return (\n      <S.Foreign\n        key={this.props.label.getID()}\n        width={canvas.offsetWidth}\n        height={canvas.offsetHeight}\n      >\n        <S.Label ref={this.ref}>\n          {this.props.engine\n            .getFactoryForLabel(this.props.label)\n            .generateReactWidget({ model: this.props.label })}\n        </S.Label>\n      </S.Foreign>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}