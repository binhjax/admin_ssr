{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/nguyenthanhbinh/Work/vnshop/admin/src/utils/dva-no-router.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport invariant from 'invariant';\nimport document from 'global/document';\nimport { Provider } from 'react-redux';\nimport * as core from 'dva-core';\nimport { isFunction } from 'dva-core';\nexport default function () {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var app = core.create(opts);\n  var oldAppStart = app.start;\n  app.router = router;\n  app.start = start;\n  return app;\n\n  function router(router) {\n    invariant(isFunction(router), \"[app.router] router should be function, but got \".concat(typeof router));\n    app._router = router;\n  }\n\n  function start(container) {\n    // 允许 container 是字符串，然后用 querySelector 找元素\n    if (isString(container)) {\n      container = document.querySelector(container);\n      invariant(container, \"[app.start] container \".concat(container, \" not found\"));\n    } // 并且是 HTMLElement\n\n\n    invariant(!container || isHTMLElement(container), \"[app.start] container should be HTMLElement\"); // 路由必须提前注册\n\n    invariant(app._router, \"[app.start] router must be registered before app.start()\");\n\n    if (!app._store) {\n      oldAppStart.call(app);\n    }\n\n    var store = app._store; // export _getProvider for HMR\n    // ref: https://github.com/dvajs/dva/issues/469\n\n    app._getProvider = getProvider.bind(null, store, app); // If has container, render; else, return react component\n\n    if (container) {\n      render(container, store, app, app._router);\n\n      app._plugin.apply('onHmr')(render.bind(null, container, store, app));\n    } else {\n      return getProvider(store, this, this._router);\n    }\n  }\n}\n\nfunction isHTMLElement(node) {\n  return typeof node === 'object' && node !== null && node.nodeType && node.nodeName;\n}\n\nfunction isString(str) {\n  return typeof str === 'string';\n}\n\nfunction getProvider(store, app, router) {\n  var _this = this;\n\n  return function (extraProps) {\n    return __jsx(Provider, {\n      store: store,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, router(_objectSpread({\n      app: app\n    }, extraProps)));\n  };\n}\n\nfunction render(container, store, app, router) {\n  var ReactDOM = require('react-dom'); // eslint-disable-line\n\n\n  ReactDOM.render( /*#__PURE__*/React.createElement(getProvider(store, app, router)), container);\n}","map":{"version":3,"sources":["/Users/nguyenthanhbinh/Work/vnshop/admin/src/utils/dva-no-router.js"],"names":["React","invariant","document","Provider","core","isFunction","opts","app","create","oldAppStart","start","router","_router","container","isString","querySelector","isHTMLElement","_store","call","store","_getProvider","getProvider","bind","render","_plugin","apply","node","nodeType","nodeName","str","extraProps","ReactDOM","require","createElement"],"mappings":"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","sourcesContent":["import React from 'react';\nimport invariant from 'invariant';\nimport document from 'global/document';\nimport { Provider } from 'react-redux';\nimport * as core from 'dva-core';\nimport { isFunction } from 'dva-core';\n\nexport default function (opts = {}) {\n    const app = core.create(opts);\n    const oldAppStart = app.start;\n    app.router = router;\n    app.start = start;\n    return app;\n\n    function router(router) {\n        invariant(\n            isFunction(router),\n            `[app.router] router should be function, but got ${typeof router}`,\n        );\n        app._router = router;\n    }\n\n    function start(container) {\n        // 允许 container 是字符串，然后用 querySelector 找元素\n        if (isString(container)) {\n            container = document.querySelector(container);\n            invariant(\n                container,\n                `[app.start] container ${container} not found`,\n            );\n        }\n\n        // 并且是 HTMLElement\n        invariant(\n            !container || isHTMLElement(container),\n            `[app.start] container should be HTMLElement`,\n        );\n\n        // 路由必须提前注册\n        invariant(\n            app._router,\n            `[app.start] router must be registered before app.start()`,\n        );\n\n        if (!app._store) {\n            oldAppStart.call(app);\n        }\n        const store = app._store;\n\n        // export _getProvider for HMR\n        // ref: https://github.com/dvajs/dva/issues/469\n        app._getProvider = getProvider.bind(null, store, app);\n\n        // If has container, render; else, return react component\n        if (container) {\n            render(container, store, app, app._router);\n            app._plugin.apply('onHmr')(render.bind(null, container, store, app));\n        } else {\n            return getProvider(store, this, this._router);\n        }\n    }\n}\n\nfunction isHTMLElement(node) {\n    return typeof node === 'object' && node !== null && node.nodeType && node.nodeName;\n}\n\nfunction isString(str) {\n    return typeof str === 'string';\n}\n\nfunction getProvider(store, app, router) {\n    return extraProps => (\n        <Provider store={store}>\n            { router({ app, ...extraProps })}\n        </Provider>\n    );\n}\n\nfunction render(container, store, app, router) {\n    const ReactDOM = require('react-dom');  // eslint-disable-line\n    ReactDOM.render(React.createElement(getProvider(store, app, router)), container);\n}"]},"metadata":{},"sourceType":"module"}